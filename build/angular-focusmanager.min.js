/*
* angular-focus-manager 0.3.4
* Obogo (c) 2015
* https://github.com/webux/angular-focusmanager
* License: MIT.
*/
!function(a,b){b.fm=a,function(a,b){b.fm=a;var c,d={FOCUS_ELEMENT_ID:"fm-id",FOCUS_GROUP_ID:"fm-group",FOCUS_PARENT_ID:"fm-parent",FOCUS_PARENT_GROUP_ID:"fm-parent-group",TAB_INDEX:"tabindex",FOCUS_GROUP:"focus-group",FOCUS_GROUP_INDEX:"focus-group-index",FOCUS_GROUP_HEAD:"focus-group-head",FOCUS_GROUP_TAIL:"focus-group-tail",FOCUS_ELEMENT:"focus-element",FOCUS_ENABLED:"focus-enabled",FOCUS_INDEX:"focus-index",SELECTABLE:"A,SELECT,BUTTON,INPUT,TEXTAREA,*[focus-index]"};!function(){try{c=angular.module("fm")}catch(a){c=angular.module("fm",[])}}(),c.directive("focusAutofocus",["focusManager","focusQuery",function(a,b){function c(){d=null,g=0,clearInterval(e)}var d,e,f=[],g=0;return{scope:!0,link:function(h,i,j){var k=i[0],l=j.focusAutofocus?parseInt(j.focusAutofocus,10):0;f[l]=k,g+=1,d||(d=h.$watch(function(){d();var g=0,h=1e3;e=setInterval(function(){if(h>g){for(var d=f.length,e=0;d>e;e+=1)if(k=f[e],b.isVisible(k)){c(),a.focus(k),k.focus();break}g+=1}},10)})),h.$on("$destroy",function(){c()})}}}]),c.directive("focusGroup",["focusManager","focusQuery","focusDispatcher","focusKeyboard",function(a,b,c,f){function g(a,c){var d,e,f,g;for(d=b.getElementsWithoutParents(c),f=d.length,e=0;f>e;){g=j,b.setParentId(d[e],a),b.setElementId(d[e],g);var h=b.getTabIndex(d[e]);(void 0===h||null===h)&&b.setTabIndex(d[e],-1),j+=1,e+=1}for(d=b.getGroupsWithoutParentGroup(c),f=d.length,e=0;f>e;)b.setParentGroupId(d[e],a),e+=1}function h(c,h){function j(){c.$on("focus::"+t,function(){g(t,s)}),b.getParentGroupId(s)||(v=s.innerHTML,s.setAttribute("tabindex",x),c.$watch(e.debounce(function(){if(w=s.innerHTML,v!==w){for(var a,b=s.querySelectorAll("["+d.FOCUS_GROUP+"]"),e=b.length;e;)e-=1,a=b[e].getAttribute(d.FOCUS_GROUP_ID),c.$broadcast("focus::"+a);v=w}g(t,s)},l)),p=k.on("focusin",e.debounce(function(a){b.contains(s,a.newTarget)?u===!1&&(u=!0,c.$broadcast("bindKeys",t)):u===!0&&(u=!1,c.$broadcast("unbindKeys"))},l)),q=k.on("enabled",function(){var c=f.direction;document.activeElement===s&&("prev"===c?a.findPrevChildGroup(t):a.findNextElement(t)),document.activeElement===s||b.contains(s,document.activeElement)?s.removeAttribute("tabindex"):s.setAttribute("tabindex",x)}),r=k.on("disabled",function(){setTimeout(function(){document.activeElement===s||b.contains(s,document.activeElement)?s.removeAttribute("tabindex"):s.setAttribute("tabindex",x)})}))}function n(){y?(f.watchNextTabKey(t),y=!1):a.enable()}function o(){setTimeout(function(){document.activeElement===m&&(y=!0)})}var p,q,r,s=h[0],t=i++,u=!1,v="",w="",x=s.getAttribute("tabindex")||0,y=!1;s.addEventListener("focus",n,!0),document.addEventListener("blur",o,!0),c.$on("focus::repeat",function(a){a.stopPropagation(),g(t,s)}),setTimeout(j,l),b.setGroupId(s,t),g(t,s),c.$on("$destroy",function(){q&&q(),p&&p(),r&&r(),s.removeEventListener("focus",n,!0),document.removeEventListener("blur",o,!0)})}var i=1,j=1,k=c(),l=100,m=document.body;return{link:h}}]),c.directive("focusHighlight",["focusManager",function(a){function b(a){var b=a.getBoundingClientRect(),c=document.body,d=document.documentElement,e=d.clientTop||c.clientTop||0,f=d.clientLeft||c.clientLeft||0,g=b.top-e,h=b.left-f,i={top:Math.round(g)-4,left:Math.round(h)-4,width:b.width+8,height:b.height+8};return i}var c=function(c,d){var e=c.style;if(d&&a.canReceiveFocus(d)){var f=b(d);e.display=null,e.left=f.left+"px",e.top=f.top+"px",e.width=f.width+"px",e.height=f.height+"px"}else e.display="none"},d=e.debounce(c,10);return{scope:!0,replace:!0,link:function(a,b){var e,f,g=b[0];g.style.display="none";var h,i=function(a){clearTimeout(e),f=a.target,d(g,a.target)},j=function(){e=setTimeout(function(){d(g)})},k=function(){b.addClass("focus-highlight-disabled"),c(b[0],f),clearTimeout(h),h=setTimeout(function(){b.removeClass("focus-highlight-disabled")},10)};document.addEventListener("focus",i,!0),document.addEventListener("blur",j,!0),window.addEventListener("scroll",k),window.addEventListener("resize",k),a.$on("$destroy",function(){document.removeEventListener("focus",i,!0),document.removeEventListener("blur",j,!0),window.removeEventListener("scroll",k),window.removeEventListener("resize",k)})},template:'<div class="focus-highlight"></div>'}}]),c.directive("focusRepeat",function(){return{scope:!0,link:function(a){a.$last&&a.$emit("focus::repeat")}}}),c.directive("ngRepeat",function(){return{scope:!0,link:function(a){a.$last&&a.$emit("focus::repeat")}}}),c.directive("focusShortcut",["focusManager",function(a){return{link:function(b,c,d){function e(){g||(g=!0,d.hasOwnProperty("focusShortcut")&&Mousetrap.bind(d.focusShortcut.split(","),function(b){return b.preventDefault(),b.stopPropagation(),a.focus(c[0]),!1}))}function f(){g&&(g=!1,d.hasOwnProperty("focusShortcut")&&Mousetrap.unbind(d.focusShortcut.split(",")))}var g=!1;d.focusShortcut&&(b.$on("bindKeys",e),b.$on("unbindKeys",f),b.$on("$destroy",f))}}}]),c.directive("focusStack",["focusManager","focusQuery",function(a,b){var c=[];return{link:function(d){c.push(b.getElementId(a.activeElement)),d.$on("$destroy",function(){if(c.length){var d=c.pop(),e=b.getElement(d);e&&setTimeout(function(){a.focus(e)})}})}}}]),c.factory("focusDispatcher",function(){function a(){this.events={}}function b(b){return b=b||"fm",c[b]||(c[b]=new a),c[b]}var c={};return a.prototype.events={},a.prototype.on=function(a,b){this.events.hasOwnProperty(a)||(this.events[a]=[]),this.events[a].push(b)},a.prototype.off=function(a,b){if(this.events.hasOwnProperty(a))for(var c in this.events[a])this.events[a][c]===b&&this.events[a].splice(c,1)},a.prototype.trigger=function(a,b){if(this.events.hasOwnProperty(a)){b=b||{},b.currentTarget=this;var c=this.events[a];for(var d in c)c.hasOwnProperty(d)&&c[d](b)}},b}),c.service("focusKeyboard",["focusManager",function(a){function b(){t||(t=!0)}function c(){t&&(t=!1)}function d(){u||(u=!0)}function f(){u&&(u=!1)}function g(){t?(c(),d()):(b(),f())}function h(a){var b=a.target;["email","number","password","search","text","textarea"].indexOf(b.type)>-1||"true"===b.getAttribute("contentEditable")||(a.preventDefault(),a.stopPropagation(),k(b,"mousedown"),k(b,"mouseup"),k(b,"click"))}function i(b){return s.direction="next",a.enabled&&a.next(),a.enabled?(b.preventDefault(),b.stopPropagation(),!1):void 0}function j(b){return s.direction="prev",a.enabled&&a.prev(),a.enabled?(b.preventDefault(),b.stopPropagation(),!1):void 0}function k(a,b){var c,d;if(a.ownerDocument?c=a.ownerDocument:9===a.nodeType&&(c=a),a.dispatchEvent){var e="";switch(b){case"click":case"mousedown":case"mouseup":e="MouseEvents"}d=c.createEvent(e);var f="change"===b?!1:!0;d.initEvent(b,f,!0),d.synthetic=!0,a.dispatchEvent(d,!0)}else a.fireEvent&&(d=c.createEventObject(),d.synthetic=!0,a.fireEvent("on"+b,d))}function l(){e.addEvent(document,"keydown",n)}function m(){e.removeEvent(document,"keydown",n)}function n(a){t&&9===a.keyCode&&(a.shiftKey?j(a):i(a)),u&&(a.shiftKey||a.altKey||a.ctrlKey||(37===a.keyCode?j(a):38===a.keyCode?j(a):39===a.keyCode?i(a):40===a.keyCode&&i(a))),a.shiftKey||a.altKey||a.ctrlKey||13===a.keyCode&&h(a)}function o(b){q(),t&&(a.enabled||(a.enable(),b.shiftKey?a.findPrevChildGroup(r):a.findNextElement(r)))}function p(a){t&&(r=a,e.addEvent(document,"keyup",o))}function q(){e.removeEvent(document,"keyup",o)}var r,s=this,t=!1,u=!1;s.direction=null,s.enable=l,s.disable=m,s.enableTabKeys=b,s.disableTabKeys=c,s.enableArrowKeys=d,s.disableArrowKeys=f,s.toggleTabArrowKeys=g,s.triggerClick=h,s.watchNextTabKey=p,s.unwatchNextTabKey=q}]).run(["focusKeyboard",function(a){a.enable(),a.enableTabKeys()}]),c.service("focusManager",["focusQuery","focusDispatcher",function(a,b){function c(a){if("undefined"==typeof a)return x.activeElement;if(x.activeElement!==a){var b={oldTarget:x.activeElement,newTarget:a};y.trigger("focusout",b),x.activeElement=a,a&&a.focus(),y.trigger("focusin",b)}}function d(b){return a.canReceiveFocus(b)}function e(){var b,c;x.activeElement?(b=a.getParentId(x.activeElement),c=a.getElementId(x.activeElement),o(b,c)):o()}function f(){var b,c;x.activeElement?(b=a.getParentId(x.activeElement),c=a.getElementId(x.activeElement),r(b,c)):r()}function g(a,b){for(var c=0,d=a.length;d>c;){if(a[c]===b)return c;c+=1}return-1}function h(b,c){var d,e;if(b&&b.length){if(!c)return b[b.length-1];if(d=a.getElement(c),e=g(b,d),e>0)return b[e-1]}}function i(b,c){var d,e;if(b&&b.length){if(!c)return b[0];if(d=a.getGroup(c),e=g(b,d),e>0)return b[e-1]}}function j(b,c){var d,e;if(b&&b.length){if(!c)return b[0];if(d=a.getElement(c),e=g(b,d),-1!==e&&e+1<b.length)return b[e+1]}}function k(b,c){var d,e;return b&&(d=a.getGroup(c),e=g(b,d),-1!==e&&e+1<b.length)?b[e+1]:void 0}function l(b,c){var d,e,f,g,h,i,j;return d=a.getGroup(c),j=a.hasGroupTail(d),!j&&b?(b=a.getParentGroupId(d),e=a.getChildGroups(b),f=k(e,c),f?(g=a.getGroupId(f),o(g)):(h=a.getGroup(b),i=a.getParentGroupId(h),l(i,b))):void m(c)}function m(b){var c,d;if(c=a.getGroup(b),d=a.getGroupTail(c),b){if("stop"===d)return;if(!d)return void w()}else b=a.getFirstGroupId();o(b)}function n(b){var c,d,e,f;c=a.getChildGroups(b),c.length?(e=a.getGroupId(c[0]),o(e)):(d=a.getGroup(b),f=a.getParentGroupId(d),l(f,b))}function o(b,d){var e,f;b?(e=a.getGroupElements(b),f=j(e,d),f?x.callback?x.callback(f):c(f):n(b)):l()}function p(b,c){var d,e,f;b?(d=a.getChildGroups(b),e=i(d,c),e?(f=a.getGroupId(e),q(f)):r(b)):(c=a.getLastGroupId(),q(c))}function q(b){var c,d;b?(c=a.getChildGroups(b),c.length?(d=a.getGroupId(c[c.length-1]),q(d)):r(b)):p()}function r(b,d){var e,f;b?(e=a.getGroupElements(b),f=h(e,d),f?x.callback?x.callback(f):c(f):s(b)):q()}function s(b){var c,d,e;if(d=a.getGroup(b),e=a.hasGroupHead(d),c=a.getParentGroupId(d),e||!c){var f=a.getGroupHead(d);"loop"===f?q(b):f||w()}else p(c,b)}function t(){x.active=!0}function u(){x.active=!1}function v(){!x.enabled&&x.active&&(x.enabled=!0,x.activeElement=document.activeElement,y.trigger("enabled"))}function w(){x.enabled&&(x.enabled=!1,y.trigger("disabled"))}var x=this,y=b();x.active=!0,x.enabled=!1,x.activeElement=null,x.focus=c,x.prev=f,x.next=e,x.on=t,x.off=u,x.findPrevChildGroup=q,x.findNextElement=o,x.canReceiveFocus=d,x.enable=v,x.disable=w}]),c.service("focusMouse",["focusManager","focusQuery",function(a,b){function c(){g.enabled=!1,e.addEvent(document,"mousedown",f)}function d(){g.enabled=!1,e.removeEvent(document,"mousedown",f)}function f(c){for(var d=c.target;"SPAN"===d.nodeName.toUpperCase();)d=d.parentNode;if(a.canReceiveFocus(d)){a.focus(d);var e=b.getParentId(d);e?a.enable():a.disable()}}var g=this;g.enabled=!1,g.enable=c,g.disable=d}]).run(["focusMouse",function(a){a.enable()}]),c.service("focusQuery",function(){function a(a){if(!a)return!1;var b=new RegExp(a.nodeName.toUpperCase()).test(d.SELECTABLE);return b||(b=a.hasAttribute(d.FOCUS_INDEX)),b||(b=a.hasAttribute(d.TAB_INDEX)&&a.getAttribute(d.TAB_INDEX)>-1),b&&(b=!a.hasAttribute("disabled")),b&&(b=j(a)),b&&(b=!a.hasAttribute(d.FOCUS_GROUP)),b}function b(){var a=e.supplant("[{focusGroup}]:not([{focusParentGroupId}])",{focusGroup:d.FOCUS_GROUP,focusParentGroupId:d.FOCUS_PARENT_GROUP_ID}),b=document.querySelector(a);return v(b)}function c(){var a=e.supplant("[{focusGroup}]:not([{focusParentGroupId}])",{focusGroup:d.FOCUS_GROUP,focusParentGroupId:d.FOCUS_PARENT_GROUP_ID}),b=document.querySelectorAll(a);return v(b[b.length-1])}function f(a){for(var b=e.supplant('[{focusParentGroupId}="{groupId}"]',{focusParentGroupId:d.FOCUS_PARENT_GROUP_ID,groupId:a}),c=document.querySelectorAll(b),f=[],g=0,h=c.length;h>g;)j(c[g])&&f.push(c[g]),g+=1;return f=E(f,G)}function g(a){if(a){var b="A:not({focusParentId}),SELECT:not({focusParentId}),BUTTON:not({focusParentId}),INPUT:not({focusParentId}),TEXTAREA:not({focusParentId}),*[focus-index]:not({focusParentId})";return b=e.supplant(b,{focusParentId:"["+d.FOCUS_PARENT_ID+"]"}),a.querySelectorAll(b)}return[]}function h(a){if(!a)return[];var b="["+d.FOCUS_GROUP_ID+"]:not(["+d.FOCUS_PARENT_GROUP_ID+"])";return a.querySelectorAll(b)}function i(a){var b,c,f,g,h,i;for(c=s(a),b=c?e.supplant('[{focusParentId}="{groupId}"][focus-index]:not([disabled]):not(.disabled)',{focusParentId:d.FOCUS_PARENT_ID,groupId:a}):e.supplant('[{focusParentId}="{groupId}"]:not([disabled]):not(.disabled)',{focusParentId:d.FOCUS_PARENT_ID,groupId:a}),f=document.querySelectorAll(b),g=[],h=0,i=f.length;i>h;)j(f[h])?(g.push(f[h]),h+=1):h+=1;return g=E(g,F)}function j(a){return a&&a.parentNode?9===a.parentNode.nodeType?!0:0===a.offsetWidth||0===a.offsetHeight?!1:"none"===a.style.display?!1:"hidden"===a.style.visibility?!1:0===a.style.opacity||"0"===a.style.opacity?!1:!0:!1}function k(a){return a?"autofocus"===a.getAttribute(d.FOCUS_ELEMENT):!1}function l(a){return a?"false"!==a.getAttribute(d.FOCUS_ENABLED):!1}function m(a){return a?!!a.getAttribute(d.FOCUS_GROUP_HEAD):!1}function n(a){return a?a.getAttribute(d.FOCUS_GROUP_HEAD):void 0}function o(a){return a?!!a.getAttribute(d.FOCUS_GROUP_TAIL):!1}function p(a){return a?a.getAttribute(d.FOCUS_GROUP_TAIL):void 0}function q(a){if(a){var b=e.supplant('[{focusElementId}="{elementId}"]',{focusElementId:d.FOCUS_ELEMENT_ID,elementId:a});return document.querySelector(b)}}function r(a){return a?document.querySelector("["+d.FOCUS_GROUP_ID+'="'+a+'"]'):void 0}function s(a){var b=r(a);return b?"strict"===b.getAttribute(d.FOCUS_GROUP):!1}function t(a){return a?a.getAttribute(d.FOCUS_ELEMENT_ID):void 0}function u(a,b){a.setAttribute(d.FOCUS_ELEMENT_ID,b)}function v(a){return a?a.getAttribute(d.FOCUS_GROUP_ID):void 0}function w(a,b){a.setAttribute(d.FOCUS_GROUP_ID,b)}function x(a){return a?a.getAttribute(d.FOCUS_PARENT_ID):void 0}function y(a,b){a.setAttribute(d.FOCUS_PARENT_ID,b)}function z(a){return a?a.getAttribute(d.FOCUS_PARENT_GROUP_ID):void 0}function A(a,b){a.setAttribute(d.FOCUS_PARENT_GROUP_ID,b)}function B(a){return a?a.getAttribute(d.TAB_INDEX):void 0}function C(a,b){a&&(null===b?a.removeAttribute(d.TAB_INDEX):a.setAttribute(d.TAB_INDEX,b))}function D(a,b){if(b){var c=b.parentNode;if(c)for(;c&&9!==c.nodeType;){if(c===a)return!0;c=c.parentNode}}return!1}function E(a,b){var c,d,e,f,g;for(b||(b=function(a,b){return a>b?1:b>a?-1:0}),d=a.length,f=d-1,c=0;d>c;c+=1)for(e=0;f>e;e+=1)b(a[e],a[e+1])>0&&(g=a[e+1],a[e+1]=a[e],a[e]=g);return a}function F(a,b){var c=parseInt(a.getAttribute(d.FOCUS_INDEX),10)||Number.POSITIVE_INFINITY,e=parseInt(b.getAttribute(d.FOCUS_INDEX),10)||Number.POSITIVE_INFINITY;return e>c?-1:c>e?1:0}function G(a,b){var c=parseInt(a.getAttribute(d.FOCUS_GROUP_INDEX),10)||Number.POSITIVE_INFINITY,e=parseInt(b.getAttribute(d.FOCUS_GROUP_INDEX),10)||Number.POSITIVE_INFINITY;return e>c?-1:c>e?1:0}var H=this;H.getElement=q,H.getElementId=t,H.setElementId=u,H.getGroupId=v,H.setGroupId=w,H.getParentId=x,H.setParentId=y,H.getParentGroupId=z,H.setParentGroupId=A,H.getGroup=r,H.getFirstGroupId=b,H.getLastGroupId=c,H.getTabIndex=B,H.setTabIndex=C,H.getElementsWithoutParents=g,H.getGroupsWithoutParentGroup=h,H.isAutofocus=k,H.isVisible=j,H.hasGroupHead=m,H.hasGroupTail=o,H.getGroupHead=n,H.getGroupTail=p,H.isEnabled=l,H.getGroupElements=i,H.getChildGroups=f,H.contains=D,H.canReceiveFocus=a});var e={};e.addEvent=function(a,b,c){angular.element(a).on(b,c)},e.removeEvent=function(a,b,c){angular.element(a).off(b,c)},e.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}},e.throttle=function(a,b,c){b=b||250;var d,e;return function(){var f=c||this,g=+new Date,h=arguments;d&&d+b>g?(clearTimeout(e),e=setTimeout(function(){d=g,a.apply(f,h)},b)):(d=g,a.apply(f,h))}},e.supplant=function(a,b){return a+="",a.replace?a.replace(/{([^{}]*)}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a}):b},function(a,b,c){function d(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return q[a.which]?q[a.which]:r[a.which]?r[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a){a=a||{};var b,c=!1;for(b in w)a[b]?c=!0:w[b]=0;c||(z=!1)}function g(a,b,c,d,e,f){var g,h,i=[],j=c.type;if(!u[a])return[];for("keyup"==j&&k(a)&&(b=[a]),g=0;g<u[a].length;++g)if(h=u[a][g],!(!d&&h.seq&&w[h.seq]!=h.level||j!=h.action||("keypress"!=j||c.metaKey||c.ctrlKey)&&b.sort().join(",")!==h.modifiers.sort().join(","))){var l=d&&h.seq==d&&h.level==f;(!d&&h.combo==e||l)&&u[a].splice(g,1),i.push(h)}return i}function h(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function i(a,b,c,d){A.stopCallback(b,b.target||b.srcElement,c,d)||!1!==a(b,c)||(b.preventDefault?b.preventDefault():b.returnValue=!1,b.stopPropagation?b.stopPropagation():b.cancelBubble=!0)}function j(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);b&&("keyup"==a.type&&x===b?x=!1:A.handleKey(b,h(a),a))}function k(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function l(a,b,c,d){function g(b){return function(){z=b,++w[a],clearTimeout(p),p=setTimeout(f,1e3)}}function h(b){i(c,b,a),"keyup"!==d&&(x=e(b)),setTimeout(f,10)}for(var j=w[a]=0;j<b.length;++j){var k=j+1===b.length?h:g(d||m(b[j+1]).action);n(b[j],k,d,a,j)}}function m(a,b){var c,d,e,f=[];for(c="+"===a?["+"]:a.split("+"),e=0;e<c.length;++e)d=c[e],t[d]&&(d=t[d]),b&&"keypress"!=b&&s[d]&&(d=s[d],f.push("shift")),k(d)&&f.push(d);if(c=d,e=b,!e){if(!o){o={};for(var g in q)g>95&&112>g||q.hasOwnProperty(g)&&(o[q[g]]=g)}e=o[c]?"keydown":"keypress"}return"keypress"==e&&f.length&&(e="keydown"),{key:d,modifiers:f,action:e}}function n(a,b,c,d,e){v[a+":"+c]=b,a=a.replace(/\s+/g," ");var f=a.split(" ");1<f.length?l(a,f,b,c):(c=m(a,c),u[c.key]=u[c.key]||[],g(c.key,c.modifiers,{type:c.action},d,a,e),u[c.key][d?"unshift":"push"]({callback:b,modifiers:c.modifiers,action:c.action,seq:d,level:e,combo:a}))}var o,p,q={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},r={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},s={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},t={option:"alt",command:"meta","return":"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},u={},v={},w={},x=!1,y=!1,z=!1;for(c=1;20>c;++c)q[111+c]="f"+c;for(c=0;9>=c;++c)q[c+96]=c;d(b,"keypress",j),d(b,"keydown",j),d(b,"keyup",j);var A={bind:function(a,b,c){a=a instanceof Array?a:[a];for(var d=0;d<a.length;++d)n(a[d],b,c);return this},unbind:function(a,b){return A.bind(a,function(){},b)},trigger:function(a,b){return v[a+":"+b]&&v[a+":"+b]({},a),this},reset:function(){return u={},v={},this},stopCallback:function(a,b){return-1<(" "+b.className+" ").indexOf(" mousetrap ")?!1:"INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable},handleKey:function(a,b,c){var d,e=g(a,b,c);b={};var h=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(h=Math.max(h,e[d].level));for(d=0;d<e.length;++d)e[d].seq?e[d].level==h&&(j=!0,b[e[d].seq]=1,i(e[d].callback,c,e[d].combo,e[d].seq)):j||i(e[d].callback,c,e[d].combo);e="keypress"==c.type&&y,c.type!=z||k(a)||e||f(b),y=j&&"keydown"==c.type}};a.Mousetrap=A,"function"==typeof define&&define.amd&&define(A)}(window,document),a.consts=d,a.module=c,a.utils=e}({},function(){return this}())}({},function(){return this}());